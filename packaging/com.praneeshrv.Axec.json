{
  "app-id": "com.praneeshrv.Axec",
  "runtime": "org.freedesktop.Platform",
  "runtime-version": "24.08",
  "sdk": "org.freedesktop.Sdk",
  "sdk-extensions": [
    "org.freedesktop.Sdk.Extension.rust-stable",
    "org.freedesktop.Sdk.Extension.node20"
  ],
  "command": "axec",
  "finish-args": [
    "--share=ipc",
    "--socket=fallback-x11",
    "--socket=wayland",
    "--device=dri",
    "--env=WEBKIT_DISABLE_DMABUF_RENDERER=1"
  ],
  "build-options": {
    "append-path": "/usr/lib/sdk/rust-stable/bin:/usr/lib/sdk/node20/bin",
    "env": {
      "CARGO_HOME": "/run/build/axec/cargo",
  "RUSTFLAGS": "-C target-cpu=native",
  "CI": "true",
  "NODE_ENV": "development",
  "NPM_CONFIG_FUND": "false",
  "NPM_CONFIG_AUDIT": "false",
  "NPM_CONFIG_PROGRESS": "false",
  "NPM_CONFIG_LOGLEVEL": "warn",
  "NPM_CONFIG_CACHE": "/run/build/axec/.npm"
    }
  },
  "modules": [
    {
      "name": "axec",
      "buildsystem": "simple",
      "build-commands": [
        "corepack enable || true",
        "corepack prepare npm@9.9.3 --activate || true",
        "mkdir -p /run/build/axec/.npm",
        "npm config set cache /run/build/axec/.npm",
        "npm install --no-audit --no-fund",
        "npm run build",
        "npm run tauri build -- --bundles none",
        "install -Dm755 src-tauri/target/release/axec /app/bin/axec",
        "install -Dm644 packaging/com.praneeshrv.Axec.desktop /app/share/applications/com.praneeshrv.Axec.desktop",
        "install -Dm644 src-tauri/icons/128x128.png /app/share/icons/hicolor/128x128/apps/com.praneeshrv.Axec.png",
        "install -Dm644 packaging/com.praneeshrv.Axec.metainfo.xml /app/share/metainfo/com.praneeshrv.Axec.metainfo.xml"
      ],
      "sources": [
  { "type": "dir", "path": ".." }
      ]
    }
  ]
}
